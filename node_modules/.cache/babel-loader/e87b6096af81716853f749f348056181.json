{"ast":null,"code":"var _jsxFileName = \"/Users/andreashellberg/Desktop/skolan/inla\\u0308mining2/uppgift2/src/containers/SignUpLoginForm.jsx\";\nimport React, { useContext, useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { AuthContext } from \"../AuthContext\";\nimport Input from \"../components/Input\";\nimport SelectInput from \"../components/SelectInput\";\nimport FormKit from \"../data/FormKit\";\nimport UserKit from \"../data/UserKit\";\n\nconst SignUpLoginForm = ({\n  type\n}) => {\n  const userKit = new UserKit();\n  const formKit = new FormKit();\n  const history = useHistory();\n  const [fieldValues, setFieldValues] = useState();\n  const {\n    setCurrentUser\n  } = useContext(AuthContext); // depending on what type of form is requested\n  // initalUserState is set by the values collected from FormKit.js\n\n  useEffect(() => {\n    let form = formKit[type]();\n    let initialUserState = form.reduce((acc, cur) => {\n      return { ...acc,\n        [cur.name]: cur.options ? cur.options[0] : \"\"\n      };\n    }, {});\n    setUser(initialUserState);\n  }, []);\n\n  const handleChange = (name, value) => {\n    setUser(prevState => {\n      return { ...prevState,\n        [name]: value\n      };\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    type === \"register\" && userKit.register(user);\n    type === \"login\" && userKit.login(user).then(res => res.json()).then(data => {\n      console.log(data);\n      setCurrentUser(true);\n      history.push(\"/\");\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, user && formKit[type]().map(field => {\n    if (field.type === \"input\") {\n      return /*#__PURE__*/React.createElement(Input, {\n        name: field.name,\n        label: field.name,\n        value: user[field.name],\n        handleChange: handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 15\n        }\n      });\n    }\n\n    if (field.type === \"select\") {\n      return /*#__PURE__*/React.createElement(SelectInput, {\n        name: field.name,\n        label: field.name,\n        value: user[field.name],\n        handleChange: handleChange,\n        options: field.options,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }\n      });\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: e => handleSubmit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, type));\n};\n\nexport default SignUpLoginForm;","map":{"version":3,"sources":["/Users/andreashellberg/Desktop/skolan/inlaÌˆmining2/uppgift2/src/containers/SignUpLoginForm.jsx"],"names":["React","useContext","useState","useEffect","useHistory","AuthContext","Input","SelectInput","FormKit","UserKit","SignUpLoginForm","type","userKit","formKit","history","fieldValues","setFieldValues","setCurrentUser","form","initialUserState","reduce","acc","cur","name","options","setUser","handleChange","value","prevState","handleSubmit","e","preventDefault","register","user","login","then","res","json","data","console","log","push","map","field"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\"\nimport { useEffect } from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport { AuthContext } from \"../AuthContext\"\nimport Input from \"../components/Input\"\nimport SelectInput from \"../components/SelectInput\"\nimport FormKit from \"../data/FormKit\"\nimport UserKit from \"../data/UserKit\"\n\nconst SignUpLoginForm = ({ type }) => {\n  const userKit = new UserKit()\n  const formKit = new FormKit()\n  const history = useHistory()\n  const [fieldValues, setFieldValues] = useState()\n  const { setCurrentUser } = useContext(AuthContext)\n\n  // depending on what type of form is requested\n  // initalUserState is set by the values collected from FormKit.js\n  useEffect(() => {\n    let form = formKit[type]()\n    let initialUserState = form.reduce((acc, cur) => {\n      return {\n        ...acc,\n        [cur.name]: cur.options ? cur.options[0] : \"\",\n      }\n    }, {})\n    setUser(initialUserState)\n  }, [])\n\n  const handleChange = (name, value) => {\n    setUser((prevState) => {\n      return {\n        ...prevState,\n        [name]: value,\n      }\n    })\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    type === \"register\" && userKit.register(user)\n    type === \"login\" &&\n      userKit\n        .login(user)\n        .then((res) => res.json())\n        .then((data) => {\n          console.log(data)\n          setCurrentUser(true)\n          history.push(\"/\")\n        })\n  }\n\n  return (\n    <form>\n      {user &&\n        formKit[type]().map((field) => {\n          if (field.type === \"input\") {\n            return (\n              <Input\n                name={field.name}\n                label={field.name}\n                value={user[field.name]}\n                handleChange={handleChange}\n              ></Input>\n            )\n          }\n          if (field.type === \"select\") {\n            return (\n              <SelectInput\n                name={field.name}\n                label={field.name}\n                value={user[field.name]}\n                handleChange={handleChange}\n                options={field.options}\n              ></SelectInput>\n            )\n          }\n        })}\n      <button onClick={(e) => handleSubmit(e)}>{type}</button>\n    </form>\n  )\n}\n\nexport default SignUpLoginForm\n"]},"metadata":{},"sourceType":"module"}